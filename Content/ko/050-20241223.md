---
author: sookim-1
description: ì£¼ê°„íšŒê³ ë¡ ë¸”ë¡œê·¸ ì •ë¦¬, ë¹„ë™ê¸° ì‘ì—… ì·¨ì†Œ ë°©ë²•, Bitbucket Sign ë°©ë²•, Atlasian ì£¼ì˜ì‚¬í•­, ì„œë¹„ìŠ¤ ì œê³µì—…ì²´ì™€ íšŒì˜, Dart ì–¸ì–´ í•™ìŠµ
date: 2024-12-23 19:00
tags: iOS, Swift, Blog, Async, Bitbucket, Atlasian, Dart
published: true
---
# ë²ˆí˜¸ : 050, ì‘ì„±ì¼ì: 2024-12-23
## 2024.12.16 ~ 2024.12.22
### ğŸ’¡Â ì£¼ê°„íšŒê³ ë¡ ë¸”ë¡œê·¸ ì •ë¦¬

---

2024ë…„ì´ ë‹¤ ë‹¤ê°€ì™€ì„œ ì£¼ê°„íšŒê³ ë¡ ë¸”ë¡œê·¸ì˜ ë¬¸ì„œë¥¼ í•œ ë²ˆ ì •ë¦¬í–ˆë‹¤. 

ë¬¸ì„œë²ˆí˜¸ì™€ Formatì´ ë‹¤ë¥¸ ë¶€ë¶„ë“¤ì„ ìˆ˜ì •í•˜ê³  ë‚´ê°€ Ignite ì €ì¥ì†Œì— ê¸°ì—¬í•œ ContentPreView Style ì„¤ì •í•˜ëŠ” ì½”ë“œ PRì´ ìŠ¹ì¸ì´ë˜ì„œ ì½”ë“œë¥¼ ì ìš©í•´ë´¤ë‹¤.

- [ContentPreView Style - PR](https://github.com/twostraws/Ignite/pull/129)

### â°Â ì§„í–‰ ì¤‘ì¸ ë¹„ë™ê¸° ì‘ì—… ì •ì§€í•˜ê¸°

---

ë¹„ë™ê¸° ì‘ì—…ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œ completionHandlerë¥¼ ì´ìš©í•˜ê±°ë‚˜, async & awiat ë¬¸ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë¹„ë™ê¸° ì‘ì—…ì„ ì‹œì‘í•œ í›„ ì™„ë£Œê°€ ë˜ê¸°ì „ì— ì‘ì—…ì„ ì·¨ì†Œí•˜ê³  ì‹¶ì€ ê²½ìš° ì–´ë–»ê²Œ ê°ê° êµ¬í˜„í•˜ëŠ” ì§€ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.

1. **completionHandler**
    
```swift
class AsyncWork {
    var item: DispatchWorkItem?
    
    func startWork() {
      if item == nil {
        item = DispatchWorkItem {
        self.item = nil
      }
    
      DispatchQueue.main.asyncAfter(deadline: .now() + 6, execute: item!)
    }
    
    func stopWork() {
        item.cancel()
        itme.nil
    }
}

let work = AsyncWork()
work.startWork()

// 6ì´ˆê°€ ì§€ë‚˜ë„ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
work.stopWork()
```
    
2. **async & awiat**
    
```swift
class AsyncWork {
    var item: Task<Void, Never>?
    
    func startWork() {
      if item == nil {
        item = Task { [weak self] in
        guard let self else { return }

        do {
            try await Task.sleep(nanoseconds: 6_000_000_000)
            self.item = nil
        } catch {
            self.item = nil
        }
      }
     }

      func stopWork() {
        item?.cancel()
        itme.nil
      }
}

let work = AsyncWork()
work.startWork()

// 6ì´ˆê°€ ì§€ë‚˜ë„ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
work.stopWork()
```
    

### ğŸ“Â ì „í™”ë²ˆí˜¸ ë¶™ì—¬ë„£ê¸° ìœ íš¨ì„±ê²€ì‚¬

---

ì§€ì§€ë‚œ ì£¼ UITextFieldì— ë³µì‚¬-ë¶™ì—¬ë„£ê¸° ì‘ì—…ì‹œ ë¶™ì—¬ë„£ê¸°ê°€ ë™ì‘ë˜ë„ë¡ ì‘ì—…ì„ í•´ë³´ì•˜ëŠ”ë° ì‘ì—…í•  ë•ŒëŠ” ìˆ«ìë§Œ ì¶”ì¶œí•˜ì—¬ ë¶™ì—¬ë„£ê¸°ê°€ ë¶ˆê°€ëŠ¥í•œ ê²ƒìœ¼ë¡œ ì•Œì•˜ëŠ”ë° ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì—ì„œ ê°€ëŠ¥í•œ ê²ƒìœ¼ë¡œ ë³´ì•„ì„œ í•œ ë²ˆ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤.

`override func paste(_ sender: Any?)` í•¨ìˆ˜ë¥¼ í†µí•´ì„œ ë¶™ì—¬ë„£ê¸° ì‹œì ì— ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ê°€ ìˆì–´ì„œ í•´ë‹¹ í•¨ìˆ˜ë¥¼ í™œìš©í•˜ì—¬ í•´ê²°í–ˆìŠµë‹ˆë‹¤.

ë˜ ì¶”ê°€ì ìœ¼ë¡œ ì•Œê²Œëœ ì‚¬ì‹¤ì€ iOS 16ì´ìƒë¶€í„°ëŠ” ë¶™ì—¬ë„£ê¸° ë°©ì§€ë¥¼ ì‚¬ìš©ìì—ê²Œ ë¬¼ì–´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- [How to Use UIPasteControl in iOS 16](https://blog.kylelanchman.com/how-to-use-uipastecontrol-in-ios-16/)

ex) ì „í™”ë²ˆí˜¸ ìœ íš¨ì„±ê²€ì‚¬ ë¶™ì—¬ë„£ê¸°

```swift
//
//  PhoneNumberTextField.swift
//  SookimIosDesignSystem
//
//  Created by sookim on 12/19/24.
//

import UIKit

// ì „í™”ë²ˆí˜¸ ì…ë ¥ í…ìŠ¤íŠ¸í•„ë“œ
protocol PhoneNumberTextFieldDelegate: AnyObject {
    func editPhoneNumberText(result: PhoneNumberTextField.ResultDescription)
}

class PhoneNumberTextField: UITextField {

    enum ResultDescription {
        case success                    // ì„±ê³µ
        case invalidPhoneNumber         // ì˜ëª»ëœ ì „í™”ë²ˆí˜¸ í˜•ì‹
        case emptyPhoneNumber           // ë¹ˆê°’
        case countLimit                 // ê°¯ìˆ˜ ì´ˆê³¼
    }

    // ìµœëŒ€ ì „í™”ë²ˆí˜¸ ê¸¸ì´ (ì˜ˆ: 010-1234-5678)
    private let maxPhoneNumberLength = 13

    // ê²°ê³¼ë¥¼ ì „ë‹¬í•  í´ë¡œì €
    var onValidationResult: ((ResultDescription) -> Void)?
    weak var phoneNumberTextFieldDelegate: PhoneNumberTextFieldDelegate?

    override init(frame: CGRect) {
        super.init(frame: frame)

        self.translatesAutoresizingMaskIntoConstraints = false
        self.keyboardType = .numberPad
        self.delegate = self
    }

    required init?(coder: NSCoder) {
        super.init(coder: coder)

        self.translatesAutoresizingMaskIntoConstraints = false
        self.keyboardType = .numberPad
        self.delegate = self
    }

    // ë¶™ì—¬ë„£ê¸° ì²˜ë¦¬
    override func paste(_ sender: Any?) {
        if let pasteboardString = UIPasteboard.general.string {
            let filteredString = filterAndFormatPhoneNumber(pasteboardString)
            self.text = filteredString

            // ë¶™ì—¬ë„£ê¸° í›„ ê²°ê³¼ ë°˜í™˜
            let validationResult = validatePhoneNumber(filteredString)

            onValidationResult?(validationResult)
            phoneNumberTextFieldDelegate?.editPhoneNumberText(result: validationResult)
        }
    }

}

// MARK: - UITextFieldDelegate
extension PhoneNumberTextField: UITextFieldDelegate {

    func textFieldShouldClear(_ textField: UITextField) -> Bool {
        // ì§€ìš°ê¸° ë²„íŠ¼ì´ ëˆŒë ¤ í…ìŠ¤íŠ¸ê°€ ë¹„ì›Œì§„ ê²½ìš°
        onValidationResult?(.emptyPhoneNumber)
        phoneNumberTextFieldDelegate?.editPhoneNumberText(result: .emptyPhoneNumber)
        return true
    }

    func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {
        guard let currentText = textField.text as NSString? else { return true }
        let newText = currentText.replacingCharacters(in: range, with: string)

        let filteredText = filterAndFormatPhoneNumber(newText)

        // ìµœëŒ€ ê¸¸ì´ ì´ˆê³¼ ë°©ì§€
        if filteredText.count > maxPhoneNumberLength {
            onValidationResult?(.countLimit)
            phoneNumberTextFieldDelegate?.editPhoneNumberText(result: .countLimit)
            return false
        }

        // í…ìŠ¤íŠ¸ë¥¼ ì—…ë°ì´íŠ¸
        textField.text = filteredText

        // ê²€ì¦ ê²°ê³¼ ë°˜í™˜
        let validationResult = validatePhoneNumber(filteredText)
        onValidationResult?(validationResult)
        phoneNumberTextFieldDelegate?.editPhoneNumberText(result: validationResult)

        return false
    }
}

// MARK: - ìœ íš¨ì„± ê²€ì¦ ë¡œì§
extension PhoneNumberTextField {

    // ìˆ«ìë§Œ í•„í„°ë§í•˜ê³  ì „í™”ë²ˆí˜¸ í˜•ì‹í™”
    private func filterAndFormatPhoneNumber(_ input: String) -> String {
        // ìˆ«ìë§Œ ì¶”ì¶œ
        let digitsOnly = input.compactMap { $0.isNumber ? String($0) : nil }.joined()

        // ì „í™”ë²ˆí˜¸ í˜•ì‹ ì ìš©
        let formattedNumber = formatAsPhoneNumber(digitsOnly)
        return formattedNumber
    }

    // ì „í™”ë²ˆí˜¸ í˜•ì‹ìœ¼ë¡œ ë³€í™˜
    private func formatAsPhoneNumber(_ digits: String) -> String {
        let length = digits.count

        switch length {
        case 0...3: // 3ìë¦¬ ì´í•˜
            return digits
        case 4...6: // ê°€ìš´ë° ë²ˆí˜¸ê°€ 3ìë¦¬
            let firstIndex = digits.index(digits.startIndex, offsetBy: 3)
            return "\(digits[..<firstIndex])-\(digits[firstIndex...])"
        case 7...10: // 10ìë¦¬ë¼ë©´ ê°€ìš´ë° ë²ˆí˜¸ 3ìë¦¬
            let firstIndex = digits.index(digits.startIndex, offsetBy: 3)
            let secondIndex = digits.index(firstIndex, offsetBy: 3) // ê°€ìš´ë° ë²ˆí˜¸ëŠ” í•­ìƒ 3ìë¦¬
            return "\(digits[..<firstIndex])-\(digits[firstIndex..<secondIndex])-\(digits[secondIndex...])"
        case 11: // 11ìë¦¬ë¼ë©´ ê°€ìš´ë° ë²ˆí˜¸ 4ìë¦¬
            let firstIndex = digits.index(digits.startIndex, offsetBy: 3)
            let secondIndex = digits.index(firstIndex, offsetBy: 4) // ê°€ìš´ë° ë²ˆí˜¸ëŠ” 4ìë¦¬
            return "\(digits[..<firstIndex])-\(digits[firstIndex..<secondIndex])-\(digits[secondIndex...])"
        case 12: // 12ìë¦¬ë¼ë©´ 010-1234-5678 í˜•ì‹
            let firstIndex = digits.index(digits.startIndex, offsetBy: 3)
            let secondIndex = digits.index(firstIndex, offsetBy: 4)
            return "\(digits[..<firstIndex])-\(digits[firstIndex..<secondIndex])-\(digits[secondIndex...])"
        default: // ì´ˆê³¼ëœ ê²½ìš° ìµœëŒ€ 12ìë¦¬ê¹Œì§€ ìë¦„
            let trimmedDigits = String(digits.prefix(12))
            return formatAsPhoneNumber(trimmedDigits)
        }
    }

    // ì „í™”ë²ˆí˜¸ ìƒíƒœ í™•ì¸
    private func validatePhoneNumber(_ text: String) -> ResultDescription {
        if text.isEmpty {
            return .emptyPhoneNumber
        }

        if text.count > maxPhoneNumberLength {
            return .countLimit
        }

        if !text.starts(with: "010") || text.count < (maxPhoneNumberLength - 1) {
            return .invalidPhoneNumber
        }

        return .success
    }

}
```

### ğŸ™‹ğŸ»â€â™‚ï¸ ê¸°íƒ€ ì‚¬í•­

---

1. Bitbucketì—ì„œ 2024-12-10ì¼ ë¶€í„° commitë“¤ì˜ sign ì—¬ë¶€ë¥¼ í‘œì‹œí•˜ë„ë¡ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆë‹¤.  ê° ì¸ì¦ë°©ì‹ì— ë”°ë¼ í‘œì‹œê°€ ë‹¬ë¼ì§„ë‹¤.
    - HTTPSë¡œ ì¸ì¦í•œ ê²½ìš°ëŠ” ë…¸ë€ ê²½ê³ ê°€ í‘œì‹œë˜ê³  signí•˜ë¼ëŠ” ì•Œë¦¼ì´ í‘œì‹œëœë‹¤. 
    - SSHë¡œ ì¸ì¦í•œ ê²½ìš° ì•„ë¬´ í‘œì‹œê°€ ì—†ë‹¤.
    - GPGë¡œ Sign í•œ ê²½ìš° ì²´í¬ í‘œì‹œê°€ í‘œì‹œëœë‹¤.
2. Atlasian ê´€ë ¨ ì œí’ˆì„ ëª¨ë°”ì¼ë¡œ ë¡œê·¸ì¸í•˜ë©´ ìœ ë£Œê²°ì œê°€ ë  ìˆ˜ ë„ ìˆìœ¼ë¯€ë¡œ ì£¼ì˜í•´ì•¼ í•œë‹¤.
3. íƒ€ ì„œë¹„ìŠ¤ ì œê³µì—…ì²´ì™€ ì²˜ìŒ íšŒì˜ë¥¼ ì§„í–‰í–ˆë‹¤. ë„ì…ì„ í–ˆì„ ë•Œ ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì„ ì§„í–‰í•˜ê³  ì–´ë–¤ ì‹ìœ¼ë¡œ ì»¤ìŠ¤í…€í•´ì£¼ëŠ” ì§€ ë“±ë“± ì–´ë–¤ ì‹ìœ¼ë¡œ ì§„í–‰ë˜ëŠ” ì§€ ê²½í—˜ì„ í•´ë³´ì•˜ë‹¤.
4. CodeFactory Dart ê¸°ì´ˆê°•ì˜ë¥¼ 3ê°•ê¹Œì§€ í•™ìŠµí–ˆë‹¤. ë§ˆë¬´ë¦¬ í•˜ê³  ì €ì¥ì†Œ ì •ë¦¬í•´ì•¼ê² ë‹¤.
