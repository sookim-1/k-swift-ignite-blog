---
date: 2024-09-19 15:00
description: AVCaptureVideo í…ìŠ¤íŠ¸ì¸ì‹, ì ‘ê·¼ê¶Œí•œ ì‚¬ìš©ì‹œ ì£¼ì˜ì‚¬í•­, Xcode ë²„ì „ë³„ ì°¨ì´ì  ì •ë¦¬, Xcode ë‹¨ì¶•í‚¤ ì •ë¦¬, Youtube Playlist ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±, SnapKit ì• ë‹ˆë©”ì´ì…˜ ì²˜ë¦¬, ì •ê·œí‘œí˜„ì‹ Tip, SwiftUI - Kavsoft, í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ ì½”ë”©í…ŒìŠ¤íŠ¸
tags: iOS, Swift, ì ‘ê·¼ê¶Œí•œ, Xcode, SwiftUI, ì •ê·œí‘œí˜„ì‹, SnapKit, CodingTest, Youtube, Vision
---
# ë²ˆí˜¸ : 033, ì‘ì„±ì¼ì: 2024-09-19
## 2024.09.09 ~ 2024.09.18
### ğŸ“·Â Text OCR

---

ì§€ë‚œ ì£¼ YesWeScanë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œë§Œ ì¸ì‹ë¥ ì´ ì¢‹ì•˜ë˜ ì´ìœ ì— ëŒ€í•´ì„œ ë¶„ì„í•´ë³¸ ê²°ê³¼ ì „ë‹¬ë°›ì€ AVCapturePhotoë¥¼ UIImageë¡œ íƒ€ì…ìºìŠ¤íŒ…í•œ ê²°ê³¼ ì¸ì‹ë¥ ì´ ì¢‹ì§€ ì•Šì•˜ê³  CMSampleBuffferë¥¼ CIImageë¡œ íƒ€ì…ìºìŠ¤íŒ…í•˜ì—¬ ì‚¬ìš©í•´ì•¼ ì¸ì‹ë¥ ì´ ì¢‹ì•˜ë‹¤.

ì¶”ê°€ë¡œ ì§ì ‘ ìº¡ì²˜ë™ì‘ì„ íŠ¸ë¦¬ê±°í•˜ì§€ ì•Šê³  ë§¤ í”„ë ˆì„ì„ ì…ë ¥ë°›ì•„ ìë™ìœ¼ë¡œ í…ìŠ¤íŠ¸ê°€ ì¸ì‹ë˜ë©´ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ê³ ë¯¼í•´ë³¸ ê²°ê³¼ AVCapturePhotoë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  AVCaptureVideoë¥¼ ì‚¬ìš©í•˜ë©´ ë§¤ í”„ë ˆì„ì„ ì…ë ¥ë°›ê³  ì…ë ¥ë°›ì€ CMSampleBufferë¥¼ CIImageë¡œ íƒ€ì…ìºìŠ¤íŒ… í›„ Visionì„ í†µí•´ í…ìŠ¤íŠ¸ë¥¼ ì¸ì‹í•˜ê²Œ ë˜ë©´ ìë™ìœ¼ë¡œ í…ìŠ¤íŠ¸ê°€ ì¸ì‹ëœ ê²½ìš°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆì—ˆë‹¤.

### ğŸŒÂ Youtube Data API í™œìš© - ì¬ìƒëª©ë¡ ë‚´ì˜ ë™ì˜ìƒëª©ë¡ ê°€ì ¸ì˜¤ê¸°

---

ì§€ë‚œ ì£¼ Youtube íŠ¹ì •ì±„ë„ ë™ì˜ìƒëª©ë¡ì„ ê°€ì ¸ì˜¤ëŠ” íŒŒì´ì¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í–ˆë‹¤. 

íŠ¹ì •ì±„ë„ ë™ì˜ìƒëª©ë¡ì´ ë§¤ìš° ë§ì€ ê²½ìš° ë¬´ë£Œ API ì œí•œëŸ‰ì´ ìˆì–´ì„œ ë”œë ˆì´ë¥¼ ì§€ì •í•´ë„ ëª¨ë“  ë™ì˜ìƒì„ ê°€ì ¸ì˜¤ì§€ ëª»í•˜ëŠ” ê²½ìš°ë„ ìˆê³ , ì¬ìƒëª©ë¡ë‚´ì˜ ë™ì˜ìƒì´ ë”°ë¡œ ìˆëŠ” ê²½ìš°ë„ ìˆì–´ì„œ ì¬ìƒëª©ë¡ ë‚´ì˜ ë™ì˜ìƒëª©ë¡ì„ ê°€ì ¸ì˜¤ëŠ” íŒŒì´ì¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€ì‘ì„±í–ˆë‹¤.

ğŸ”—Â [Youtube API Docs - playlistitem](https://developers.google.com/youtube/v3/docs/playlistItems/list?hl=ko)

```python
import requests
import time

# Step 1: API ì„¤ì •
API_KEY = ''  # ì‹¤ì œ API í‚¤ ì‘ì„±
PLAYLIST_ID = '' # ì¬ìƒëª©ë¡ ID
CHANNEL_ID = ''  # ì œëª©ì„ ê°€ì ¸ì˜¬ ì±„ë„ ID

MAX_RESULTS = 50  # í•œ ë²ˆì— ê°€ì ¸ì˜¬ ê²°ê³¼ ìˆ˜ (ìµœëŒ€ 50)

# ìœ íŠœë¸Œ ë°ì´í„° API v3 playlistItems ì—”ë“œí¬ì¸íŠ¸ ê¸°ë³¸ URL
youtube_url = 'https://www.googleapis.com/youtube/v3/playlistItems'

# API ìš”ì²­ì— í•„ìš”í•œ ë§¤ê°œë³€ìˆ˜
params = {
    'part': 'snippet',
    'maxResults': MAX_RESULTS,
    'playlistId': PLAYLIST_ID,
    'key': API_KEY
}

# ì¬ìƒëª©ë¡ì—ì„œ ë¹„ë””ì˜¤ ì œëª©ê³¼ URLì„ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
def fetch_playlist_video_titles_and_urls():
    videosResult = []
    next_page_token = None
    index = 1  # ë™ì˜ìƒ ì¸ë±ìŠ¤ ì‹œì‘ê°’

    while True:
        if next_page_token:
            params['pageToken'] = next_page_token

        # Step 2: ìœ íŠœë¸Œ ë°ì´í„° APIì— GET ìš”ì²­ ë³´ë‚´ê¸°
        response = requests.get(youtube_url, params=params)
        data = response.json()

        # Step 3: ë¹„ë””ì˜¤ ì œëª© ë° URL ì¶”ì¶œ
        for item in data['items']:
            title = item['snippet']['title']
            video_id = item['snippet']['resourceId']['videoId']
            video_url = f'https://www.youtube.com/watch?v={video_id}&list={PLAYLIST_ID}&index={index}'
            videosResult.append((title, video_url))
            index += 1

        # ë‹¤ìŒ í˜ì´ì§€ê°€ ìˆëŠ”ì§€ í™•ì¸
        next_page_token = data.get('nextPageToken')

        # ë‹¤ìŒ í˜ì´ì§€ê°€ ìˆì„ ê²½ìš°, 61ì´ˆ ëŒ€ê¸°
        if not next_page_token:
            break

    return videosResult

# ì œëª©ê³¼ URLì„ í…ìŠ¤íŠ¸ íŒŒì¼ì— ì €ì¥í•˜ëŠ” í•¨ìˆ˜
def save_titles_and_urls_to_file(videos, filename='playlist_video_titles_and_urls.txt'):
    with open(filename, 'w', encoding='utf-8') as file:
        for index, (title, url) in enumerate(videos, start=1):
            file.write(f"{index}. **[{title}]({url})**\n\n")

# ì½”ë“œ ì‹¤í–‰
videos = fetch_playlist_video_titles_and_urls()
save_titles_and_urls_to_file(videos)
```

- ì›í•˜ëŠ” ì±„ë„IDë¥¼ ê²€ìƒ‰í•œ í›„ ë‹¤ìŒí˜ì´ì§€ê°€ ìˆë‹¤ë©´ í˜ì´ì§€ë¥¼ ê²€ìƒ‰í•˜ì—¬ ë™ì˜ìƒëª©ë¡ì„ ê°€ì ¸ì˜¨ í›„ playlist_video_titles_and_urls.txtíŒŒì¼ì— ì €ì¥í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸

### ğŸ‘¨â€ğŸ“Â AutorizationStatus ì •ë¦¬

---

iOSì—ì„œëŠ” ëª‡ëª‡ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì ‘ê·¼ê¶Œí•œë“±ì´ í•„ìš”í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìœ„ì¹˜ê¶Œí•œì´ í•„ìš”í•œ ê²½ìš° ìœ„ì¹˜ì •ë³´ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.

ì ‘ê·¼ê¶Œí•œì˜ ìƒíƒœë“±ì„ ì•Œ ìˆ˜ ìˆëŠ” ë°©ë²•ì€ AuthorizationStatusë¼ëŠ” enumê°ì²´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìœ„ì¹˜ì ‘ê·¼ê¶Œí•œì€ CLAuthorizationStatusë¡œ caseê°€ ì•½ê°„ ë‹¤ë¥´ì§€ë§Œ ëŒ€ë¶€ë¶„ì˜ caseë“¤ì˜ ì¢…ë¥˜ëŠ” 3ê°€ì§€ (`Authorized` , `Denied`  , `NotDetermined` )ë¥¼ ìì£¼ ì‚¬ìš©í•©ë‹ˆë‹¤. 

- `Authorized` : ê¶Œí•œì´ í—ˆìš©ëœ ìƒíƒœ
- `Denied` : ê¶Œí•œì´ ê±°ë¶€ëœ ìƒíƒœ
- `NotDetermined` : ê¶Œí•œí—ˆìš©ì—¬ë¶€ë¥¼ ë¬¼ì–´ë³´ì§€ ì•Šì€ ìƒíƒœ

ê·¸ëŸ¼ notDeterminedëŠ” ê¶Œí•œí—ˆìš©ì—¬ë¶€ë¥¼ ë¬¼ì–´ë³´ì§€ ì•Šì€ ìƒíƒœì¸ë° ì•±ì´ ì²˜ìŒ ì‹œì‘í•  ë•Œ ë¬´ì¡°ê±´ ê¶Œí•œí—ˆìš©ì—¬ë¶€ë¥¼ ë¬¼ì–´ë³¸ ìƒíƒœì—ë„ ê°€ë”ì”© notDeterminedë¡œ ì„¤ì •ëœ ê²½ìš°ê°€ ìˆì„ ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ ìˆì–´ì„œ ì˜ì•„í•´ì„œ ê²€ìƒ‰í•´ë³´ì•˜ì§€ë§Œ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤ëŠ” ë‚´ìš©ë§Œ ì°¾ì•˜ë‹¤.

ê¶Œí•œìš”ì²­ì„ í•˜ëŠ” í´ë¡œì €ë‚´ì—ì„œ UIê´€ë ¨ ì‘ì—…ë“¤ì€ ë©”ì¸ìŠ¤ë ˆë“œë¥¼ ì£¼ì˜í•´ì„œ ì‚¬ìš©í•  í•„ìš”ê°€ ìˆë‹¤.

### ğŸ™‹ğŸ»â€â™‚ï¸ ê¸°íƒ€ ì‚¬í•­

---

1. Xcode 16ì´ ë°œí‘œë˜ë©´ì„œ ì´ì „ ë²„ì „ë“¤ì˜ ì°¨ì´ì ì´ ê¶ê¸ˆí•´ì„œ ê°„ë‹¨íˆ ì°¾ì•„ë³´ì•˜ëŠ”ë° iOSë³´ë‹¤ Xcodeê°€ ë¨¼ì € ë°œí‘œë˜ì—ˆê³  macOSì „ìš©ì´ë¼ëŠ” ë¶€ë¶„ë“±ì´ ì‹ ê¸°í–ˆë‹¤.
2. ì •ê·œì‹ ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©í•˜ëŠ” ë°©ë²• `[A-Z0-91{2}_[A-Z0-9]{2}_[A-Z0-9]{2}` ì™€ `([A-Z0-9]{2}_){2}[A-Z0-9]{2}` ëŠ” ë™ì¼í•˜ë‹¤.
3. SnapKitìœ¼ë¡œ ë ˆì´ì•„ì›ƒì„ êµ¬í˜„í•˜ëŠ” ê²½ìš° í‚¤ë³´ë“œê°€ ì˜¬ë¼ì˜¬ ë•Œ ì• ë‹ˆë©”ì´ì…˜ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•
    
    ```swift
    @objc func keyboardWillShow(note: NSNotification) {
        if let keyboardSize = (note.userInfo?[UIResponder.keyboardFrameEndUserInfoKey] as? NSValue)?.cgRectValue {
            var keyboardHeight = CGFloat(Int(keyboardSize.height))
            
            self.scrollView.snp.updateConstraints {
                $0.bottom.equalToSuperView().offset(-keyboardHeight)
            }
    
            UIView.animate(withDuration: 0.5, delay: 0, options: .curveEaseOut, animations: {
                self.view.layoutIfNeeded()
            }, completion: nil)
        }
    }
    ```
    
4. Xcode ë‹¨ì¶•í‚¤ë¥¼ ì •ë¦¬í–ˆë‹¤.
5. Kavsoftë¼ëŠ” SwiftUIë¥¼ ì˜ ì •ë¦¬í•œ ì‚¬ì´íŠ¸ê°€ ìˆì–´ì„œ í•´ë‹¹ ì±„ë„ì„ ë³´ë©° ì •ë¦¬í–ˆë‹¤.
6. í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ ì½”ë”©í…ŒìŠ¤íŠ¸ 0ë‹¨ê³„ ì¤‘ ìì£¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë˜ ë©”ì„œë“œë“¤ì„ ì •ë¦¬ í–ˆë‹¤.
